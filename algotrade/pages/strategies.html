<div class="nav nav-pills" id="strategyTabs" role="tablist">
    <button class="nav-link active" id="create-tab" data-bs-toggle="pill" data-bs-target="#create" type="button" role="tab">Create Strategy</button>
    <button class="nav-link" id="my-tab" data-bs-toggle="pill" data-bs-target="#my" type="button" role="tab">My Strategies</button>
    <button class="nav-link" id="deployed-tab" data-bs-toggle="pill" data-bs-target="#deployed" type="button" role="tab">Deployed Strategies</button>
</div>

<div class="tab-content">
    <div class="tab-pane fade show active" id="create" role="tabpanel">
        <div class="card">
            <h5>Strategy Type</h5>
            <div class="btn-group" role="group">
                <input type="radio" class="btn-check" name="strategy" id="time" checked>
                <label class="btn btn-outline-primary" for="time">Time Based</label>
                
                <input type="radio" class="btn-check" name="strategy" id="indicator">
                <label class="btn btn-outline-primary" for="indicator">Indicator Based</label>
            </div>
        </div>

        <div class="card">
            <h5>Select Instruments</h5>
            <select class="form-select mb-3">
                <option>NIFTY 50</option>
                <option>BANKNIFTY</option>
                <option>FINNIFTY</option>
            </select>

            <div class="row">
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text">Lot Size</span>
                        <input type="number" class="form-control" value="25" style="margin: 0;">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text">Strike</span>
                        <select class="form-select">
                            <option>ATM</option>
                            <option>ITM</option>
                            <option>OTM</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text">Option</span>
                        <select class="form-select">
                            <option>CE</option>
                            <option>PE</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h5>Risk Management</h5>
            

            <div class="row">
                <div class="col-md-4">
                    <label class="form-label">Exit when total profit amounts to</label>
                    <input type="text" class="form-control">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Exit when total loss amounts to</label>
                    <input type="text" class="form-control">
                </div>
                <div class="col-md-4">
                    <label class="form-label">No Trade After</label>
                    <input type="text" class="form-control">
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-12">
                    <label class="form-label">Profit Management Options</label>
                    <div class="d-flex">
                        <div class="form-check me-3">
                            <input class="form-check-input" type="radio" name="profitManagement" id="noTrailing" value="noTrailing" checked>
                            <label class="form-check-label" for="noTrailing">No Trailing</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input" type="radio" name="profitManagement" id="lockFixProfit" value="lockFixProfit">
                            <label class="form-check-label" for="lockFixProfit">Lock Fix Profit</label>
                        </div>
                        <div class="form-check me-3">
                            <input class="form-check-input" type="radio" name="profitManagement" id="totalProfit" value="totalProfit">
                            <label class="form-check-label" for="totalProfit">Total Profit</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="profitManagement" id="lockAndTrail" value="lockAndTrail">
                            <label class="form-check-label" for="lockAndTrail">Lock and Trail</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-2" id="trailingOptions">
                <div class="col-md-6">
                    <label class="form-label">Trail Amount</label>
                    <div class="input-group">
                        <span class="input-group-text">Increase by</span>
                        <input type="number" class="form-control" id="trailStep" value="400" min="1">
                        <span class="input-group-text">points</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Profit Threshold</label>
                    <div class="input-group">
                        <span class="input-group-text">For every</span>
                        <input type="number" class="form-control" id="profitStep" value="800" min="1">
                        <span class="input-group-text">points profit</span>
                    </div>
                </div>
            </div>
            <div class="row mt-2" id="trailPreview">
                <div class="col-12">
                    <div class="alert alert-info">
                        <div class="d-flex justify-content-between align-items-center">
                            <small>
                                <i class="fas fa-info-circle"></i> Preview: 
                                <span id="previewText">Stop loss will increase by 400 points for every 800 points profit</span>
                            </small>
                            <button class="btn btn-sm btn-outline-primary" id="calculateBtn">Calculate</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h5>Save Strategy</h5>
            <div class="row align-items-end">
                <div class="col-md-8">
                    <label class="form-label">Strategy Name</label>
                    <input type="text" class="form-control" placeholder="Enter a name for your strategy">
                </div>
                <div class="col-md-4 text-end">
                    <button class="btn btn-primary">Save Strategy</button>
                </div>
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="my" role="tabpanel">
        <div class="card">
            <h5>My Saved Strategies</h5>
            <p>No strategies saved yet</p>
        </div>
    </div>

    <div class="tab-pane fade" id="deployed" role="tabpanel">
        <div class="card">
            <h5>Currently Deployed</h5>
            <p>No strategies deployed</p>
        </div>
    </div>
</div> 

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const trailingSwitch = document.getElementById('enableTrailing');
        const trailingOptions = document.getElementById('trailingOptions');
        const trailPreview = document.getElementById('trailPreview');
        const trailStep = document.getElementById('trailStep');
        const profitStep = document.getElementById('profitStep');
        const previewText = document.getElementById('previewText');
        const calculateBtn = document.getElementById('calculateBtn');

        trailingSwitch.addEventListener('change', function() {
            trailingOptions.style.display = this.checked ? 'flex' : 'none';
            trailPreview.style.display = this.checked ? 'flex' : 'none';
            updatePreview();
        });

        // Update preview when values change
        [trailStep, profitStep].forEach(input => {
            input.addEventListener('input', updatePreview);
        });

        function updatePreview() {
            const trail = parseInt(trailStep.value) || 0;
            const profit = parseInt(profitStep.value) || 0;

            if (trail && profit) {
                previewText.innerHTML = `Stop loss will increase by ${trail} points for every ${profit} points profit`;
            } else {
                previewText.innerHTML = 'Please enter valid numbers for both fields';
            }
        }

        calculateBtn.addEventListener('click', function() {
            const currentProfit = prompt('Enter current profit in points:');
            if (currentProfit !== null) {
                const trail = parseInt(trailStep.value);
                const profit = parseInt(profitStep.value);
                const steps = Math.floor(parseInt(currentProfit) / profit);
                const trailAmount = steps * trail;
                
                alert(`For ${currentProfit} points profit, stop loss would increase by ${trailAmount} points`);
            }
        });

        // Initial preview update
        updatePreview();
    });
</script> 